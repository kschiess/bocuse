#!/usr/bin/env ruby
#

# Eg. bocuse staging/complex
#
node_pattern = %r{#{ARGV[0] || '\w+'}}
puts %Q{Loading configurations for nodes /#{node_pattern.source}/}

require File.expand_path '../../lib/bocuse', __FILE__

Bocuse::Nodes.find(node_pattern).each do |name, configuration|
  STDOUT.puts
  STDOUT.puts name
  STDOUT.puts configuration.to_h # TODO to_json
  STDOUT.puts
end